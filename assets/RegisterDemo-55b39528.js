import{O as f}from"./register-0366e0af.js";import{o as g,c as h,a as l,J as m,T as d,r as u,e as a}from"./app-1a4365f6.js";import{_}from"./plugin-vue_export-helper-c27b6911.js";import{N as y,d as i}from"./network-37b3834d.js";import"./op-0eeb77a0.js";const k={data(){return{register:new f}},mounted(){},methods:{trigger(){this.$emit("output",{value:this.register.get(),ops:this.register.flush()})},ack(t){this.register.ack(t)},apply(t){this.register.apply(t)},submit(t){const e=t.target.value;this.register.set(e),this.trigger()}}},v={class:"register"},w={class:"text"};function N(t,e,s,r,c,n){return g(),h("div",v,[l("span",w,m(c.register.get()),1),l("input",{class:"input",type:"text",onKeyup:e[0]||(e[0]=d((...o)=>n.submit&&n.submit(...o),["enter"])),placeholder:"Enter something..."},null,32)])}const O=_(k,[["render",N],["__file","Register.vue"]]);const x={components:{Register:O,NetworkSetting:y},data(){return{channel1:null,channel2:null}},mounted(){this.channel1=i.createChannel("register1"),this.channel1.receive(t=>{const{type:e,ops:s}=JSON.parse(t);if(e==="submit"){for(const r of s)this.$refs.register1.apply(r);this.channel1.send("register2",JSON.stringify({type:"ack",ops:s}))}else if(e==="ack")for(const r of s)this.$refs.register1.ack(r);else throw new Error("unknown type")}),this.channel2=i.createChannel("register2"),this.channel2.receive(t=>{const{type:e,ops:s}=JSON.parse(t);if(e==="submit"){for(const r of s)this.$refs.register2.apply(r);this.channel2.send("register1",JSON.stringify({type:"ack",ops:s}))}else if(e==="ack")for(const r of s)this.$refs.register2.ack(r);else throw new Error("unknown type")})},methods:{networkTrigger({online:t,delay:e}){const s=parseInt(e);i.setDelay(s),i.setEnable(t)},output1({value:t,ops:e}){const s={type:"submit",ops:e};this.channel1.send("register2",JSON.stringify(s))},output2({value:t,ops:e}){const s={type:"submit",ops:e};this.channel2.send("register1",JSON.stringify(s))}}},$={class:"flex-list"};function b(t,e,s,r,c,n){const o=u("network-setting"),p=u("register");return g(),h("div",null,[a(o,{onNetwork:n.networkTrigger},null,8,["onNetwork"]),l("div",$,[a(p,{ref:"register1",class:"flex-list-item",onOutput:n.output1},null,8,["onOutput"]),a(p,{ref:"register2",class:"flex-list-item",onOutput:n.output2},null,8,["onOutput"])])])}const B=_(x,[["render",b],["__file","RegisterDemo.vue"]]);export{B as default};

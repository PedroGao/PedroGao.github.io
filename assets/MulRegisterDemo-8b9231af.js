import{M as v}from"./register-f4e3854d.js";import{o as p,c,a as n,N as m,P as h,Q as y,S as k,J as w,T as x,r as f,e as g}from"./app-4eb79304.js";import{_}from"./plugin-vue_export-helper-c27b6911.js";import{N,d as a}from"./network-285e4b5a.js";import"./op-fac60542.js";const R={data(){return{register:new v,key:"",value:""}},mounted(){},methods:{trigger(){this.$emit("output",{value:this.register.toJSON(),ops:this.register.flush()})},ack(t){this.register.ack(t)},apply(t){this.register.apply(t)},submit(t,e){const s=e.target.value;this.register.set(t,s),this.trigger()},add(){this.register.set(this.key,this.value),this.key="",this.value="",this.trigger()},del(t){this.register.set(t,""),this.trigger()}}},O={class:"kv"},S={class:"kv"},b={class:"kv"},J={class:"text"},M=["onKeyup","value"],C=["onClick"];function D(t,e,s,r,o,l){return p(),c("div",null,[n("div",null,[n("div",O,[e[3]||(e[3]=n("span",{class:"text"},"key",-1)),m(n("input",{class:"input-inline",type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>o.key=i)},null,512),[[h,o.key]])]),n("div",S,[e[4]||(e[4]=n("span",{class:"text"},"value",-1)),m(n("input",{class:"input-inline",type:"text","onUpdate:modelValue":e[1]||(e[1]=i=>o.value=i)},null,512),[[h,o.value]]),n("button",{class:"add",onClick:e[2]||(e[2]=(...i)=>l.add&&l.add(...i))},"+")])]),e[5]||(e[5]=n("hr",null,null,-1)),(p(!0),c(y,null,k(o.register.toJSON(),(i,u)=>(p(),c("div",b,[n("span",J,w(u),1),n("input",{class:"input-inline",type:"text",onKeyup:x(d=>l.submit(u,d),["enter"]),value:i},null,40,M),n("button",{class:"del",onClick:d=>l.del(u)},"x",8,C)]))),256))])}const $=_(R,[["render",D],["__file","MulRegister.vue"]]);const E={components:{MulRegister:$,NetworkSetting:N},data(){return{channel1:null,channel2:null}},mounted(){this.channel1=a.createChannel("mul-register1"),this.channel1.receive(t=>{const{type:e,ops:s}=JSON.parse(t);if(e==="submit"){for(const r of s)this.$refs.mulRegister1.apply(r);this.channel1.send("mul-register2",JSON.stringify({type:"ack",ops:s}))}else if(e==="ack")for(const r of s)this.$refs.mulRegister1.ack(r);else throw new Error("unknown type")}),this.channel2=a.createChannel("mul-register2"),this.channel2.receive(t=>{const{type:e,ops:s}=JSON.parse(t);if(e==="submit"){for(const r of s)this.$refs.mulRegister2.apply(r);this.channel2.send("mul-register1",JSON.stringify({type:"ack",ops:s}))}else if(e==="ack")for(const r of s)this.$refs.mulRegister2.ack(r);else throw new Error("unknown type")})},methods:{networkTrigger({online:t,delay:e}){const s=parseInt(e);a.setDelay(s),a.setEnable(t)},output1({value:t,ops:e}){const s={type:"submit",ops:e};this.channel1.send("mul-register2",JSON.stringify(s))},output2({value:t,ops:e}){const s={type:"submit",ops:e};this.channel2.send("mul-register1",JSON.stringify(s))}}},T={class:"flex-list"};function V(t,e,s,r,o,l){const i=f("network-setting"),u=f("mul-register");return p(),c("div",null,[g(i,{onNetwork:l.networkTrigger},null,8,["onNetwork"]),n("div",T,[g(u,{ref:"mulRegister1",class:"flex-list-item",onOutput:l.output1},null,8,["onOutput"]),g(u,{ref:"mulRegister2",class:"flex-list-item",onOutput:l.output2},null,8,["onOutput"])])])}const F=_(E,[["render",V],["__file","MulRegisterDemo.vue"]]);export{F as default};

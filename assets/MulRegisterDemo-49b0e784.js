import{M as v}from"./register-c818c6e2.js";import{o as c,c as p,a as n,N as h,P as _,Q as y,S as k,J as w,T as x,r as m,e as d}from"./app-bdc81fbb.js";import{_ as f}from"./plugin-vue_export-helper-c27b6911.js";import{N,d as a}from"./network-ad454d24.js";import"./op-32a9b9ae.js";const R={data(){return{register:new v,key:"",value:""}},mounted(){},methods:{trigger(){this.$emit("output",{value:this.register.toJSON(),ops:this.register.flush()})},ack(t){this.register.ack(t)},apply(t){this.register.apply(t)},submit(t,e){const s=e.target.value;this.register.set(t,s),this.trigger()},add(){this.register.set(this.key,this.value),this.key="",this.value="",this.trigger()},del(t){this.register.set(t,""),this.trigger()}}},O={class:"kv"},S=n("span",{class:"text"},"key",-1),b={class:"kv"},J=n("span",{class:"text"},"value",-1),M=n("hr",null,null,-1),C={class:"kv"},D={class:"text"},$=["onKeyup","value"],E=["onClick"];function T(t,e,s,r,o,l){return c(),p("div",null,[n("div",null,[n("div",O,[S,h(n("input",{class:"input-inline",type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>o.key=i)},null,512),[[_,o.key]])]),n("div",b,[J,h(n("input",{class:"input-inline",type:"text","onUpdate:modelValue":e[1]||(e[1]=i=>o.value=i)},null,512),[[_,o.value]]),n("button",{class:"add",onClick:e[2]||(e[2]=(...i)=>l.add&&l.add(...i))},"+")])]),M,(c(!0),p(y,null,k(o.register.toJSON(),(i,u)=>(c(),p("div",C,[n("span",D,w(u),1),n("input",{class:"input-inline",type:"text",onKeyup:x(g=>l.submit(u,g),["enter"]),value:i},null,40,$),n("button",{class:"del",onClick:g=>l.del(u)},"x",8,E)]))),256))])}const V=f(R,[["render",T],["__file","MulRegister.vue"]]);const B={components:{MulRegister:V,NetworkSetting:N},data(){return{channel1:null,channel2:null}},mounted(){this.channel1=a.createChannel("mul-register1"),this.channel1.receive(t=>{const{type:e,ops:s}=JSON.parse(t);if(e==="submit"){for(const r of s)this.$refs.mulRegister1.apply(r);this.channel1.send("mul-register2",JSON.stringify({type:"ack",ops:s}))}else if(e==="ack")for(const r of s)this.$refs.mulRegister1.ack(r);else throw new Error("unknown type")}),this.channel2=a.createChannel("mul-register2"),this.channel2.receive(t=>{const{type:e,ops:s}=JSON.parse(t);if(e==="submit"){for(const r of s)this.$refs.mulRegister2.apply(r);this.channel2.send("mul-register1",JSON.stringify({type:"ack",ops:s}))}else if(e==="ack")for(const r of s)this.$refs.mulRegister2.ack(r);else throw new Error("unknown type")})},methods:{networkTrigger({online:t,delay:e}){const s=parseInt(e);a.setDelay(s),a.setEnable(t)},output1({value:t,ops:e}){const s={type:"submit",ops:e};this.channel1.send("mul-register2",JSON.stringify(s))},output2({value:t,ops:e}){const s={type:"submit",ops:e};this.channel2.send("mul-register1",JSON.stringify(s))}}},K={class:"flex-list"};function L(t,e,s,r,o,l){const i=m("network-setting"),u=m("mul-register");return c(),p("div",null,[d(i,{onNetwork:l.networkTrigger},null,8,["onNetwork"]),n("div",K,[d(u,{ref:"mulRegister1",class:"flex-list-item",onOutput:l.output1},null,8,["onOutput"]),d(u,{ref:"mulRegister2",class:"flex-list-item",onOutput:l.output2},null,8,["onOutput"])])])}const Q=f(B,[["render",L],["__file","MulRegisterDemo.vue"]]);export{Q as default};

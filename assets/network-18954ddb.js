import{_ as h}from"./plugin-vue_export-helper-c27b6911.js";import{o as c,c as u,a as s,K as o,f as d,J as p}from"./app-de3d0993.js";const g={data(){return{online:!0,rangeValue:100}},mounted(){},methods:{changeNetworkState(){this.online=!this.online,this.$emit("network",{online:this.online,delay:this.rangeValue})},handleInput(i){this.rangeValue=i.target.value,this.$emit("network",{online:this.online,delay:this.rangeValue})}}},w={class:"network"},f={class:"control"},m={class:"control"},k=["oninput"];function b(i,t,e,n,a,l){return c(),u("div",w,[s("fieldset",f,[t[3]||(t[3]=s("label",null,"Network",-1)),s("button",{type:"button",class:"toggle",onClick:t[0]||(t[0]=(...r)=>l.changeNetworkState&&l.changeNetworkState(...r))},[s("span",{class:o(["state",{highlight:a.online}])},t[1]||(t[1]=[d('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><g fill="currentColor"><circle cx="8" cy="12.5" r="1.5"></circle><path d="M11.5 10C10.6 9 9.3 8.5 8 8.5S5.4 9 4.5 10L3.1 8.6c1.3-1.4 3-2.1 4.9-2.1s3.6.7 4.9 2.1L11.5 10z"></path><path d="M8 2C5 2 2.2 3.1 0 5.2l1.4 1.4C3.2 4.9 5.5 4 8 4s4.8.9 6.6 2.7L16 5.2C13.8 3.1 11 2 8 2z"></path></g></svg>',1)]),2),s("span",{class:o(["state",{highlight:!a.online}])},t[2]||(t[2]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[s("g",{fill:"currentColor"},[s("path",{d:"M8.142 7.507C8.094 7.506 8.048 7.5 8 7.5c-1.9 0-3.6.7-4.9 2.1L4.5 11c.798-.886 1.912-1.357 3.06-1.457l.582-2.036zm1.988.32-.557 1.949c.724.242 1.398.636 1.927 1.224l1.4-1.4a6.423 6.423 0 0 0-2.77-1.773zM8.848 5.039l.557-1.946C8.942 3.037 8.475 3 8 3 5 3 2.2 4.1 0 6.2l1.4 1.4C3.2 5.9 5.5 5 8 5c.286 0 .568.015.848.039zm2.52-1.546-.55 1.924A9.051 9.051 0 0 1 14.599 7.7L16 6.2a11.442 11.442 0 0 0-4.632-2.707z"}),s("path",{d:"M6.001 16a1.001 1.001 0 0 1-.963-1.275l4-14a1.001 1.001 0 0 1 1.924.549l-4 14a1 1 0 0 1-.961.726z"})])],-1)]),2)])]),s("fieldset",m,[t[4]||(t[4]=s("label",null,"Latency",-1)),s("input",{type:"range",min:"100",max:"3000",oninput:l.handleInput},null,8,k),s("p",null,p(a.rangeValue),1)])])}const N=h(g,[["render",b],["__file","NetworkSetting.vue"]]);class y{constructor(t,e){this.lastUpdate=0,this.isRunning=!1,this.delay=0,this.callback=t,this.delay=e,this.loop()}loop(){requestAnimationFrame(()=>{const t=Date.now();if(!this.isRunning)this.lastUpdate=t,this.loop();else{const e=t-this.lastUpdate;(this.lastUpdate===null||e>this.delay)&&(this.callback(),this.lastUpdate=t-e%this.delay),this.loop()}})}start(){this.isRunning||(this.lastUpdate=Date.now(),this.isRunning=!0)}stop(){this.isRunning=!1}reset(t){this.lastUpdate=Date.now(),this.delay=t,this.start()}resetForward(t){this.callback(),this.delay=t,this.lastUpdate=Date.now(),this.start()}}class C{constructor(t=300,e=!0){this.channelMap=new Map,this.delay=t,this.enable=e}createChannel(t){const e=new v(t,this);return this.channelMap.set(t,e),e}getChannel(t){return this.channelMap.get(t)}removeChannel(t){this.channelMap.delete(t)}setDelay(t){this.delay=t}setEnable(t){this.enable=t}getEnable(){return this.enable}}class v{constructor(t,e){this.name=t,this.network=e,this.buffer=[],this.receiveCbs=[],this.timer=new y(()=>{const n=this.buffer.shift();n!=null&&this.network.getEnable()&&this.receiveCbs.forEach(a=>{a(n)})},this.network.delay),this.timer.start()}send(t,e){const n=this.network.getChannel(t);if(n)n.write(e);else throw new Error(`Channel ${t} not found`)}broadcast(t){for(const[e,n]of this.network.channelMap.entries())e!==this.name&&n.write(t)}receive(t){this.receiveCbs.push(t)}write(t){setTimeout(()=>{this.buffer.push(t)},this.network.delay)}}const S=new C;export{N,S as d};
